# Note on units: when memory size is needed, it is possible to specify
# it in the usual form of 1k 5GB 4M and so forth:
#
# 1k => 1000 bytes
# 1kb => 1024 bytes
# 1m => 1000000 bytes
# 1mb => 1024*1024 bytes
# 1g => 1000000000 bytes
# 1gb => 1024*1024*1024 bytes

## General
#
dir ./db
daemonize no
pidfile /var/run/redis.pid
databases 1

## Network
#
# If port 0 is specified Redis will not listen on a TCP socket.
port 6379
# If you want you can bind a single interface, if the bind option is not
# specified all the interfaces will listen for incoming connections.
bind 127.0.0.1
# unixsocket /tmp/redis.sock
# unixsocketperm 755
timeout 0
# If non-zero, use SO_KEEPALIVE to send TCP ACKs to clients in absence
# of communication. This is useful for two reasons:
#
# 1) Detect dead peers.
# 2) Take the connection alive from the point of view of network
#    equipment in the middle.
#
# A reasonable value for this option is 60 seconds.
tcp-keepalive 0

## Logging
#
# Levels: debug, verbose, notice, warning
loglevel debug
# logfile "/var/log/redis/development.log"
syslog-enabled no
syslog-ident redis
# Specify the syslog facility. Must be USER or between LOCAL0-LOCAL7.
syslog-facility local0

## RDB
#
# save <seconds> <changes>
save 30 5
save 120 20
stop-writes-on-bgsave-error yes
rdbcompression no
rdbchecksum no
dbfilename development.rdb

## AOF
#
appendonly no
appendfilename development.aof
# fsync: no(Fastest, not safe), everysec(Compromise between safe and speed), always(Slowest, safest)
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

## Replication
#
# slaveof <masterip> <masterport>
# masterauth <master-password>
slave-serve-stale-data yes
slave-read-only yes
# repl-ping-slave-period 10
# > than repl-ping-slave-period or timeouts occur when low traffic to and from master and slave
repl-timeout 60
repl-disable-tcp-nodelay no
# repl-backlog-size 1mb
# repl-backlog-ttl 3600
# < the betters, if 0 the slave will never be promoted to master
slave-priority 100
# min-slaves-to-write 3
# min-slaves-max-lag 10

## Security
#
# requirepass foobared
# If using AOF the following commands won't be able to be done on start
# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52
# rename-command CONFIG ""

## Limits
#
# maxclients 10000
# maxmemory <bytes>
# Policies:
#   volatile-lru -> remove the key with an expire set using an LRU algorithm
#   allkeys-lru -> remove any key accordingly to the LRU algorithm
#   volatile-random -> remove a random key with an expire set
#   allkeys-random -> remove a random key, any key
#   volatile-ttl -> remove the key with the nearest expire time (minor TTL)
#   noeviction -> don't expire at all, just return an error on write operations
# maxmemory-policy volatile-lru
# maxmemory-samples 3

## Lua
#
lua-time-limit 5000

## Slow log
#
slowlog-log-slower-than 10000
slowlog-max-len 128

## Event notifications
#
# Check the official conf for details, quite complex
# notify-keyspace-events ""

## Advanced
#
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
list-max-ziplist-entries 512
list-max-ziplist-value 64
set-max-intset-entries 512
zset-max-ziplist-entries 128
zset-max-ziplist-value 64
activerehashing yes
client-output-buffer-limit normal 0 0 0
client-output-buffer-limit slave 256mb 64mb 60
client-output-buffer-limit pubsub 32mb 8mb 60
hz 10
aof-rewrite-incremental-fsync yes
